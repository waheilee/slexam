<include file="Public/head"/>
<body class="no-skin">
<include file="Public/header"/>
<link href="__PUBLIC__/admin/css/common.css" type="text/css" rel="stylesheet">
<link href="__PUBLIC__/admin/css/index.css" type="text/css" rel="stylesheet">
<script src="__PUBLIC__/admin/js/imgUp.js"></script>
<div class="main-container" id="main-container">
    <script type="text/javascript">
        try {
            ace.settings.check('main-container', 'fixed')
        } catch (e) {
        }
    </script>
    <style>
        /*分割线样式*/
        .sigma-content{
            margin: 50px;
            text-align: center;
            background-color: #fff;
        }
        .sigma-middle-line:before{
            content: '';
            display: block;
            height: 3px;
            width: 100%;
            background-color: red;/*颜色需与主题大背景色一致*/ 
            position: relative;
            top: 10px;/*调节线高*/
            left: 0;
        }
        .sigma-line-text{
            display: inline-block;
            background: #fff;
            padding: 0 18px 0 18px;
            position: relative;
            font-size: 14px;
            font-weight: 500;
        }
    </style>
    <include file="Public/sidebar"/>
    <div class="main-content">
        <div class="main-content-inner">
            <!-- #section:basics/content.breadcrumbs -->
            <include file="Public/breadcrumbs"/>

            <!-- /section:basics/content.breadcrumbs -->
            <div class="page-content">
                <include file="Public/set"/>

                <!-- /section:settings.box -->
                <div class="row">
                    <div class="col-xs-12">
                        <form class="form-horizontal" id="form" method="post" action="{:U('update')}">
                            <input type="hidden" name="aid" value="{$article.aid}" id="aid"/>
                            <!-- PAGE CONTENT BEGINS -->
                            <div class="space-4"></div>
                            <div class="form-group">
                                <label class="col-sm-1 control-label no-padding-right" for="form-field-3">
                                    故事</label>
                                <div class="col-sm-9">
                                    <textarea name="story" id="stoty" placeholder="故事"
                                              class="col-xs-10 col-sm-5"
                                              rows="10">{$article['stoty']}</textarea>
                                    <span class="help-inline col-xs-12 col-sm-7">
                                        <span class="middle">故事</span>
                                    </span>
                                </div>
                            </div>
                            <div class="space-4"></div>
                            <div class="form-group">
                                <label class="col-sm-1 control-label no-padding-right" for="form-field-1">
                                    题数 </label>
                                <div class="col-sm-9">
                                    <input type="text" name="contentcount" id="contentcount" placeholder="题数"
                                           class="col-xs-10 col-sm-5" value="{$article['title']}">
                                    <span class="help-inline col-xs-12 col-sm-7">
                                        <span class="middle">题数不能为空。</span>
                                    </span>
                                </div>
                            </div>
                             <div class="space-4"></div>
                            <div class="form-group">
                                <label class="col-sm-1 control-label no-padding-right" for="form-field-0">
                                    题目类型 </label>
                                <div class="col-sm-9">
                                <select name="model" id="model">
                                    <option value="" >类型</option>
                                        <option  value="1" >模拟题</option>
                                        <option  value="2" >真题</option>
                               
                                </select>
                                </div>
                            </div>
                            <div class="space-4"></div>
                            <div class="form-group">
                                <label class="col-sm-1 control-label no-padding-right" for="form-field-0">
                                    试题时间 </label>

                                <div class="col-sm-9">
                                    <input  id="birthday" placeholder="选择时间" name="questiontime" type="text" data-date-format="yyyy-mm-dd" 
                                            value="<if condition="
                                            $time neq '' ">{$time1|date="Y-m-d ",###}</if>"
                                    />
                                    <span >
                                        <i class="ace-icon fa fa-calendar bigger-110"></i>
                                    </span>
                                </div>
                            </div>
                            <a href="#" id="AddMoreFileBox" class="btn btn-info">添加更多的题目</a></span></p>  
                            <div id="InputsWrapper">  
                                <div>
                                    <div class="form-group">
                                        <label class="col-sm-1 control-label no-padding-right" for="form-field-0">
                                            题目分类 </label>
                                        <div class="col-sm-9">
                                            <select name="course1" id="province1">
                                                <option value="" >课程</option>
                                                <volist name="province" id="vo">
                                                    <option  value="{$vo.id}" <if condition="$vo.id eq $question['kid']"> selected="selected" </if>>{$vo.name}</option>
                                                </volist>
                                            </select>
                                            <select name="chapter1" id="city1"> 
                                                <option value="">章节</option>
                                            </select>
                                            <select name="point1" id="town1">
                                                <option value="">知识点</option>
                                            </select>   
                                        </div>
                                    </div>

                                    <div class="space-4"></div>
                                    <div class="form-group">
                                        <label class="col-sm-1 control-label no-padding-right" for="form-field-1">
                                            题目 </label>
                                        <div class="col-sm-9">
                                           <textarea name="content1" id="description" placeholder="题目"
                                              class="col-xs-10 col-sm-5"
                                              rows="8">{$quest['content']}</textarea>
                                            <span class="help-inline col-xs-12 col-sm-7">
                                                <span class="middle">题目不能为空。</span>
                                            </span>
                                        </div>
                                    </div>


                                    <div class="space-4"></div>
                                    <div class="form-group">
                                        <label class="col-sm-1 control-label no-padding-right" for="form-field-3">
                                            A</label>
                                        <div class="col-sm-9">
                                            <textarea name="aa1" id="description" placeholder="A选项"
                                                      class="col-xs-10 col-sm-5"
                                                      rows="5">{$article['description']}</textarea>
                                            <span class="help-inline col-xs-12 col-sm-7">
                                                <span class="middle">A选项</span>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="space-4"></div>
                                    <div class="form-group">
                                        <label class="col-sm-1 control-label no-padding-right" for="form-field-3">
                                            B</label>
                                        <div class="col-sm-9">
                                            <textarea name="bb1" id="description" placeholder="B选项"
                                                      class="col-xs-10 col-sm-5"
                                                      rows="5">{$article['description']}</textarea>
                                            <span class="help-inline col-xs-12 col-sm-7">
                                                <span class="middle">B选项</span>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="space-4"></div>
                                    <div class="form-group">
                                        <label class="col-sm-1 control-label no-padding-right" for="form-field-3">
                                            C</label>
                                        <div class="col-sm-9">
                                            <textarea name="cc1" id="description" placeholder="C选项"
                                                      class="col-xs-10 col-sm-5"
                                                      rows="5">{$article['description']}</textarea>
                                            <span class="help-inline col-xs-12 col-sm-7">
                                                <span class="middle">C选项</span>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="space-4"></div>
                                    <div class="form-group">
                                        <label class="col-sm-1 control-label no-padding-right" for="form-field-3">
                                            D</label>
                                        <div class="col-sm-9">
                                            <textarea name="dd1" id="description" placeholder="D选项"
                                                      class="col-xs-10 col-sm-5"
                                                      rows="5">{$article['description']}</textarea>
                                            <span class="help-inline col-xs-12 col-sm-7">
                                                <span class="middle">D选项</span>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="space-4"></div>
                                    <div class="form-group">
                                        <label class="col-sm-1 control-label no-padding-right" for="form-field-2">
                                            单选/多选 </label>
                                        <div class="col-sm-9">
                                            <select name="multiple1" class="col-xs-10 col-sm-5">
                                                <option value="1">--单选--</option>
                                                <option value="2">--多选--</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="space-4"></div>
                                    <div class="form-group">
                                        <label class="col-sm-1 control-label no-padding-right" for="form-field-2">
                                            答案： </label>
                                        <div class="col-sm-9">
                                            <label>A<input name="answer1[]" type="checkbox" value="aa" style='margin-left: 10px;'/></label> 
                                            <label style='margin-left: 10px;'>B <input name="answer1[]" type="checkbox" value="bb" style='margin-left: 10px;'/></label> 
                                            <label style='margin-left: 10px;'>C <input name="answer1[]" type="checkbox" value="cc" style='margin-left: 10px;'/></label> 
                                            <label style='margin-left: 10px;'>D<input name="answer1[]" type="checkbox" value="dd" style='margin-left: 10px;'/></label>
                                        </div>
                                    </div>

                                    <div class="space-4"></div>
                                    <div class="form-group">
                                        <label class="col-sm-1 control-label no-padding-right" for="form-field-2">
                                            关键词 </label>
                                        <div class="col-sm-9">
                                            <input type="text" name="keywords1" id="keywords" placeholder="关键词"
                                                   class="col-xs-10 col-sm-5" value="{$article['keywords']}">
                                            <span class="help-inline col-xs-12 col-sm-7">
                                                <span class="middle">关键词。</span>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="space-4"></div>
                              <div class="form-group">
                                <label class="col-sm-1 control-label no-padding-right" for="form-field-0">
                                    题目难度 </label>
                                <div class="col-sm-9">
                                <select name="difficulty1" id="province">
                                    <option value="" >难度</option>
                                     <option  value="易" <if condition="易 eq $quest['difficulty']"> selected="selected" </if>>易</option>
                                     <option  value="中" <if condition="中 eq $quest['difficulty']"> selected="selected" </if>>中</option>
                                     <option  value="难" <if condition="难 eq $quest['difficulty']"> selected="selected" </if>>难</option>
                                </select>
                                </div> 
                              </div>
                                    <div class="space-4"></div>
                                    <div class="form-group">
                                        <label class="col-sm-1 control-label no-padding-right" for="form-field-2">
                                            详解： </label>
                                        <div class="col-sm-9">
                                            <textarea name="explain1" id="content"
                                                      style="width:100%;height:400px;visibility:hidden;">{$article['content']}</textarea>
                                        </div>
                                    </div>

                                </div></div>

                            <div class="space-4"></div>


                            <div class="col-md-offset-2 col-md-9">
                                <button class="btn btn-info submit" type="button">
                                    <i class="icon-ok bigger-110"></i>
                                    提交
                                </button>

                                &nbsp; &nbsp; &nbsp;
                                <button class="btn" type="reset">
                                    <i class="icon-undo bigger-110"></i>
                                    重置
                                </button>
                            </div>

                            <!-- PAGE CONTENT ENDS -->


                        </form>
                    </div><!-- /.col -->
                </div><!-- /.row -->
            </div><!-- /.page-content -->
        </div>
    </div><!-- /.main-content -->
    <include file="Public/footer"/>

</div><!-- /.main-container -->

<include file="Public/footerjs"/>
<script src="__PUBLIC__/admin/js/date-time/bootstrap-datepicker.js"></script>
<!-- inline scripts related to this page -->
<script type="text/javascript">
        $(function () {
            jQuery(function ($) {
                $('#birthday').datepicker({
                    format: 'yyyy-mm-dd',
                    weekStart: 1,
                    autoclose: true,
                    todayBtn: 'linked',
                    language: 'cn'
                });
            });
        });

//追加
        $(document).ready(function () {

            var MaxInputs = 12; //maximum input boxes allowed  
            var InputsWrapper = $("#InputsWrapper"); //Input boxes wrapper ID  
            var AddButton = $("#AddMoreFileBox"); //Add button ID  

            var x = InputsWrapper.length; //initlal text box count  
            var FieldCount = 1; //to keep track of text box added  

            $(AddButton).click(function (e)  //on add input button click  
            {
                if (x <= MaxInputs) //max input box allowed  
                {
                    FieldCount++; //text box added increment  
                    //add input box  
                    $(InputsWrapper).append('<div class="sigma-content"><div class="sigma-middle-line"><span class="sigma-line-text">下一题的分割线</span></div></div><div class="space-4"></div><div class="form-group"><label class="col-sm-1 control-label no-padding-right" for="form-field-0">题目分类 </label><div class="col-sm-9"><select name="course' + FieldCount + '" id="province' + FieldCount + '"><option value="" >课程</option><volist name="province" id="vo"><option  value="{$vo.id}" >{$vo.name}</option></volist></select><select name="chapter' + FieldCount + '" id="city' + FieldCount + '"> <option value="">章节</option></select><select name="point' + FieldCount + '" id="town' + FieldCount + '"><option value="">知识点</option></select> </div></div><div class="space-4"></div><div class="form-group"><label class="col-sm-1 control-label no-padding-right" for="form-field-1"> 题目' + FieldCount + ' </label><div class="col-sm-9"><textarea name="content' + FieldCount + '" id="description" placeholder="题目' + FieldCount + '"  class="col-xs-10 col-sm-5" rows="8">{$quest["content"]}</textarea><span class="help-inline col-xs-12 col-sm-7"> <span class="middle">题目不能为空。</span></span></div></div> <div class="space-4"></div><div class="form-group"><label class="col-sm-1 control-label no-padding-right" for="form-field-3"> A</label><div class="col-sm-9"><textarea name="aa' + FieldCount + '" id="description" placeholder="A选项"  class="col-xs-10 col-sm-5"  rows="5">{$article["description"]}</textarea><span class="help-inline col-xs-12 col-sm-7"><span class="middle">A选项</span></span></div></div><div class="space-4"></div><div class="form-group"> <label class="col-sm-1 control-label no-padding-right" for="form-field-3"> B</label><div class="col-sm-9"><textarea name="bb' + FieldCount + '" id="description" placeholder="B选项" class="col-xs-10 col-sm-5"  rows="5">{$article["description"]}</textarea><span class="help-inline col-xs-12 col-sm-7"><span class="middle">B选项</span></span></div></div><div class="space-4"></div><div class="form-group"><label class="col-sm-1 control-label no-padding-right" for="form-field-3">C</label><div class="col-sm-9"><textarea name="cc' + FieldCount + '" id="description" placeholder="C选项"   class="col-xs-10 col-sm-5"   rows="5">{$article["description"]}</textarea> <span class="help-inline col-xs-12 col-sm-7"><span class="middle">C选项</span></span></div></div><div class="space-4"></div><div class="form-group"><label class="col-sm-1 control-label no-padding-right" for="form-field-3"> D</label><div class="col-sm-9"><textarea name="dd' + FieldCount + '" id="description" placeholder="D选项" class="col-xs-10 col-sm-5" rows="5">{$article["description"]}</textarea><span class="help-inline col-xs-12 col-sm-7"> <span class="middle">D选项</span></span></div></div><div class="space-4"></div><div class="form-group"><label class="col-sm-1 control-label no-padding-right" for="form-field-2"> 单选/多选 </label> <div class="col-sm-9"><select name="multiple' + FieldCount + '" class="col-xs-10 col-sm-5"><option value="1">--单选--</option><option value="2">--多选--</option> </select> </div></div><div class="space-4"></div><div class="form-group"><label class="col-sm-1 control-label no-padding-right" for="form-field-2">答案： </label><div class="col-sm-9"><label>A<input name="answer' + FieldCount + '[]" type="checkbox" value="aa" style="margin-left: 10px;"/></label>  <label style="margin-left: 10px;">B <input name="answer' + FieldCount + '[]" type="checkbox" value="bb" style="margin-left: 10px;"/></label> <label style="margin-left: 10px;">C <input name="answer' + FieldCount + '[]" type="checkbox" value="cc" style="margin-left: 10px;"/></label> <label style="margin-left: 10px;">D<input name="answer' + FieldCount + '[]" type="checkbox" value="dd" style="margin-left: 10px;"/></label> </div> </div><div class="space-4"></div><div class="form-group"><label class="col-sm-1 control-label no-padding-right" for="form-field-2"> 关键词 </label><div class="col-sm-9"><input type="text" name="keywords' + FieldCount + '" id="keywords" placeholder="关键词" class="col-xs-10 col-sm-5" value="{$article["keywords"]}"> <span class="help-inline col-xs-12 col-sm-7"> <span class="middle">关键词。</span> </span> </div> </div><div class="space-4"></div><div class="form-group"><label class="col-sm-1 control-label no-padding-right" for="form-field-0">题目难度 </label><div class="col-sm-9"><select name="difficulty' + FieldCount + '" id="province"> <option value="" >难度</option><option  value="易"  >易</option><option  value="中"  >中</option><option  value="难" >难</option></select></div> </div><div class="space-4"></div><div class="form-group"><label class="col-sm-1 control-label no-padding-right" for="form-field-2">  详解： </label><div class="col-sm-9"><textarea name="explain' + FieldCount + '" id="content"    style="width:100%;height:400px;visibility:hidden;">{$article["content"]}</textarea></div></div>');
                    x++; //text box increment  
                }

                $('#province2').change(function () {
                    var val = $('#province2 option:selected').val();
                    loadRegion('#city2', val);
                })
                $('#city2').change(function () {
                    var val = $('#city2 option:selected').val();
                    loadRegion('#town2', val);
                })
                $('#province3').change(function () {
                    var val = $('#province3 option:selected').val();
                    loadRegion('#city3', val);
                })
                $('#city3').change(function () {
                    var val = $('#city3 option:selected').val();
                    loadRegion('#town3', val);
                })
                $('#province4').change(function () {
                    var val = $('#province4 option:selected').val();
                    loadRegion('#city4', val);
                })
                $('#city4').change(function () {
                    var val = $('#city4 option:selected').val();
                    loadRegion('#town4', val);
                })
                $('#province5').change(function () {
                    var val = $('#province5 option:selected').val();
                    loadRegion('#city5', val);
                })
                $('#city5').change(function () {
                    var val = $('#city5 option:selected').val();
                    loadRegion('#town5', val);
                })
                $('#province6').change(function () {
                    var val = $('#province6 option:selected').val();
                    loadRegion('#city6', val);
                })
                $('#city6').change(function () {
                    var val = $('#city6 option:selected').val();
                    loadRegion('#town6', val);
                })
                var editor = KindEditor.create('textarea[name="explain2"]', {
                    uploadJson: '__PUBLIC__/kindeditor/php/upload_json.php',
                    fileManagerJson: '__PUBLIC__/kindeditor/php/file_manager_json.php',
                    allowFileManager: true,
                    afterBlur: function () {
                        this.sync();
                    }
                });
                var editor = KindEditor.create('textarea[name="explain3"]', {
                    uploadJson: '__PUBLIC__/kindeditor/php/upload_json.php',
                    fileManagerJson: '__PUBLIC__/kindeditor/php/file_manager_json.php',
                    allowFileManager: true,
                    afterBlur: function () {
                        this.sync();
                    }
                });
                var editor = KindEditor.create('textarea[name="explain4"]', {
                    uploadJson: '__PUBLIC__/kindeditor/php/upload_json.php',
                    fileManagerJson: '__PUBLIC__/kindeditor/php/file_manager_json.php',
                    allowFileManager: true,
                    afterBlur: function () {
                        this.sync();
                    }
                });
                var editor = KindEditor.create('textarea[name="explain5"]', {
                    uploadJson: '__PUBLIC__/kindeditor/php/upload_json.php',
                    fileManagerJson: '__PUBLIC__/kindeditor/php/file_manager_json.php',
                    allowFileManager: true,
                    afterBlur: function () {
                        this.sync();
                    }
                });
                var editor = KindEditor.create('textarea[name="explain6"]', {
                    uploadJson: '__PUBLIC__/kindeditor/php/upload_json.php',
                    fileManagerJson: '__PUBLIC__/kindeditor/php/file_manager_json.php',
                    allowFileManager: true,
                    afterBlur: function () {
                        this.sync();
                    }
                });
                return false;
            });

            $("body").on("click", ".removeclass", function (e) { //user click on remove text  
                if (x > 1) {
                    $(this).parent('div').prev("label").remove();
                    $(this).parent('div').remove(); //remove text box  
                    x--; //decrement textbox  
                }
                return false;
            })
        });
        $(function () {
            $("#tabs").tabs();

            var editor = KindEditor.create('textarea[name="explain1"]', {
                uploadJson: '__PUBLIC__/kindeditor/php/upload_json.php',
                fileManagerJson: '__PUBLIC__/kindeditor/php/file_manager_json.php',
                allowFileManager: true,
                afterBlur: function () {
                    this.sync();
                }
            });


            $(".submit").click(function () {
                var contentcount = $("#contentcount").val();
                var title = $("#title").val();
                var content = $("#content").val();
                if (contentcount == '') {
                    bootbox.dialog({
                        title: '友情提示：',
                        message: "试题数目必须选择。",
                        buttons: {
                            "success": {
                                "label": "确定",
                                "className": "btn-danger"
                            }
                        }
                    });
                    return;
                }
                if (title == '') {
                    bootbox.dialog({
                        title: '友情提示：',
                        message: "文章标题必须填写。",
                        buttons: {
                            "success": {
                                "label": "确定",
                                "className": "btn-danger"
                            }
                        }
                    });
                    return;
                }
                if (content == '') {
                    bootbox.dialog({
                        title: '友情提示：',
                        message: "文章内容需要填写。",
                        buttons: {
                            "success": {
                                "label": "确定",
                                "className": "btn-danger"
                            }
                        }
                    });
                    return;
                    return;
                }
                $("#form").submit();
            });
        });

        function loadRegion(obj, id, type, check) {
            $.ajax({
                url: "{:U('getRegion')}",
                type: 'post',
                data: {'id': id, 'type': type, 'check': check},
                success: function (data) {
                    $(obj).html(data);
                }

            })
        }
        $('#province1').change(function () {
            var val = $('#province1 option:selected').val();
            loadRegion('#city1', val);
        })
        $('#city1').change(function () {
            var val = $('#city1 option:selected').val();
            loadRegion('#town1', val);
        })
</script>
</body>
</html>
